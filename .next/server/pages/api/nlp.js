"use strict";(()=>{var e={};e.id=71,e.ids=[71],e.modules={3480:(e,t,n)=>{e.exports=n(5600)},3873:e=>{e.exports=require("path")},4026:(e,t,n)=>{n.r(t),n.d(t,{config:()=>p,default:()=>c,routeModule:()=>f});var r={};n.r(r),n.d(r,{default:()=>d});var a=n(3480),i=n(8667),s=n(6435),o=n(9500);let u=!1;async function d(e,t){if("POST"!==e.method)return t.status(405).end();let{message:n}=e.body;u||(await (0,o.trainNLP)(),u=!0);let r=await (0,o.processMessage)(n);t.status(200).json(r)}let c=(0,s.M)(r,"default"),p=(0,s.M)(r,"config"),f=new a.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/nlp",pathname:"/api/nlp",bundlePath:"",filename:""},userland:r})},5600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5699:e=>{e.exports=require("node-nlp")},6435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})},8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},9021:e=>{e.exports=require("fs")},9500:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});let r=n(5699),a=n(9021),i=n(3873).join(process.cwd(),"src","data","training-data.json"),s=JSON.parse(a.readFileSync(i,"utf8")),o=Object.keys(s),u=new r.NlpManager({languages:o,forceNER:!0});e.exports={trainNLP:async function(){for(let e of o){let{documents:t,answers:n}=s[e];for(let r in t.forEach(t=>u.addDocument(e,t.text,t.intent)),n)u.addAnswer(e,r,n[r])}await u.train(),u.save()},processMessage:async function(e){let t=/[\u0600-\u06FF]/.test(e)?"fa":"en",n=await u.process(t,e);return{text:e,lang:t,intent:n.intent,sentiment:n.sentiment,answer:n.answer,score:n.score}}}}};var t=require("../../webpack-api-runtime.js");t.C(e);var n=t(t.s=4026);module.exports=n})();